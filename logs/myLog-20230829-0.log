2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.StartupInfoLogger: Starting EachbatchApplication using Java 11.0.20 on yang.local with PID 63817 (/Users/leo/Downloads/2023_java/eachbatch/target/classes started by leo in /Users/leo/Downloads/2023_java/eachbatch)
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.logging.DeferredLog: The Class-Path manifest attribute in /Users/leo/.m2/repository/com/ibm/db2/jcc/11.5.8.0/jcc-11.5.8.0.jar referenced one or more files that do not exist: file:/Users/leo/.m2/repository/com/ibm/db2/jcc/11.5.8.0/pdq.jar
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.logging.DeferredLog: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.logging.DeferredLog: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 8089 (http)
2023-08-29 22:01:14 INFO  [restartedMain] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-08-29 22:01:14 INFO  [restartedMain] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/9.0.65]
2023-08-29 22:01:14 INFO  [restartedMain] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-08-29 22:01:14 INFO  [restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 628 ms
2023-08-29 22:01:14 INFO  [restartedMain] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2023-08-29 22:01:14 INFO  [restartedMain] org.hibernate.Version: HHH000412: Hibernate ORM core version 5.6.10.Final
2023-08-29 22:01:14 INFO  [restartedMain] org.hibernate.annotations.common.reflection.java.JavaReflectionManager: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-08-29 22:01:15 INFO  [restartedMain] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Starting...
2023-08-29 22:01:15 INFO  [restartedMain] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Start completed.
2023-08-29 22:01:15 INFO  [restartedMain] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.DB2Dialect
2023-08-29 22:01:15 INFO  [restartedMain] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-08-29 22:01:15 INFO  [restartedMain] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-08-29 22:01:15 WARN  [restartedMain] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-08-29 22:01:15 INFO  [restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer: LiveReload server is running on port 35729
2023-08-29 22:01:15 INFO  [restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat started on port(s): 8089 (http) with context path ''
2023-08-29 22:01:16 INFO  [restartedMain] org.springframework.boot.StartupInfoLogger: Started EachbatchApplication in 2.167 seconds (JVM running for 2.542)
2023-08-29 22:01:16 INFO  [restartedMain] com.twnch.eachbatch.dao.MyActivemq: push start
2023-08-29 22:01:16 INFO  [scheduling-1] com.twnch.eachbatch.util.MyScanner: Automatic checking(Unprocessed files): 0
2023-08-29 22:01:26 INFO  [scheduling-1] com.twnch.eachbatch.util.MyScanner: Automatic checking(Unprocessed files): 0
2023-08-29 22:01:29 INFO  [pool-2-thread-1] com.twnch.eachbatch.dao.MyDao: 第1個批次檔上傳至FLCOMTROLTAB
2023-08-29 22:01:29 INFO  [pool-2-thread-1] com.twnch.eachbatch.dao.MyDao: 第2個批次檔上傳至FLCOMTROLTAB
2023-08-29 22:01:29 INFO  [pool-2-thread-1] com.twnch.eachbatch.dao.MyDao: 第3個批次檔上傳至FLCOMTROLTAB
2023-08-29 22:01:29 INFO  [pool-2-thread-1] com.twnch.eachbatch.dao.MyDao: 檔案移動至pending和historydata完成
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.dao.MyActivemq: !!!: [MyEntity(ID=16252, PROCSEQ=1, BIZDATE=01120809  , BATCHSEQ=822-01120807006, START_TS=2023-08-29 22:01:29.089, TOTALCOUNT=6, TOTALAMT=600, REJECTCOUNT=0, REJECTAMT=0, ACCEPTCOUNT=6, ACCEPTAMT=600, PROCCOUNT=6, PROCAMT=600, LASTMODIFYDT=2023-08-29 22:01:29.18, STATUS=2, PFILENAME=822-01120807006.P01, FILELAYOUT=01, SENDERBANK=0040037, CUT_IN_LINE=N                                                 )]
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.dao.MyActivemq: 資料處理中, 狀態為4, 資料為: MyEntity(ID=16252, PROCSEQ=1, BIZDATE=01120809  , BATCHSEQ=822-01120807006, START_TS=2023-08-29 22:01:29.089, TOTALCOUNT=6, TOTALAMT=600, REJECTCOUNT=0, REJECTAMT=0, ACCEPTCOUNT=6, ACCEPTAMT=600, PROCCOUNT=6, PROCAMT=600, LASTMODIFYDT=2023-08-29 22:01:29.18, STATUS=4, PFILENAME=822-01120807006.P01, FILELAYOUT=01, SENDERBANK=0040037, CUT_IN_LINE=N                                                 )
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.dao.MyActivemq: 資料傳送至Queue, 資料為: [{"ID":16249,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SD","ACH_TXID":"506","ACH_SEQ":"00000001","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011111111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011300001","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"27352858  ","ACH_PID":"Y100236715","ACH_CNO":"ACHU001             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"},{"ID":16250,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SD","ACH_TXID":"506","ACH_SEQ":"00000002","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011111111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011300002","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"27352858  ","ACH_PID":"Y100237624","ACH_CNO":"ACHU002             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"}]
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 資料更新, PROCAMT = 500, PROCCOUNT = 5
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 交易完成, 狀態更新為9, 交易為: MyEntity2(ID=16249, BIZDATE=01120809, PROCSEQ=1, BATCHSEQ=822-01120807006, ACH_TXDATE=01120809, ACH_TYPE=N, ACH_TXTYPE=SD, ACH_TXID=506, ACH_SEQ=00000001, ACH_PBANK=0040037, ACH_PCLNO=0000000011111111, ACH_RBANK=4980000, ACH_RCLNO=0000000011300001, ACH_AMT=0000000100, ACH_SCHD=B, ACH_CID=27352858  , ACH_PID=Y100236715, ACH_CNO=ACHU001             , ACH_CFEE=00000, TXN_AMT=100, STATUS=9)
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 資料更新, PROCAMT = 400, PROCCOUNT = 4
2023-08-29 22:01:30 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 交易完成, 狀態更新為9, 交易為: MyEntity2(ID=16250, BIZDATE=01120809, PROCSEQ=1, BATCHSEQ=822-01120807006, ACH_TXDATE=01120809, ACH_TYPE=N, ACH_TXTYPE=SD, ACH_TXID=506, ACH_SEQ=00000002, ACH_PBANK=0040037, ACH_PCLNO=0000000011111111, ACH_RBANK=4980000, ACH_RCLNO=0000000011300002, ACH_AMT=0000000100, ACH_SCHD=B, ACH_CID=27352858  , ACH_PID=Y100237624, ACH_CNO=ACHU002             , ACH_CFEE=00000, TXN_AMT=100, STATUS=9)
2023-08-29 22:01:31 INFO  [pool-1-thread-1] com.twnch.eachbatch.dao.MyActivemq: 資料傳送至Queue, 資料為: [{"ID":16251,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SD","ACH_TXID":"506","ACH_SEQ":"00000003","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011111111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011300003","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"27352858  ","ACH_PID":"B125784951","ACH_CNO":"ACHU003             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"},{"ID":16246,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SC","ACH_TXID":"358","ACH_SEQ":"00000004","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011211111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011500001","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"03704502  ","ACH_PID":"A264885123","ACH_CNO":"ACHU004             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"}]
2023-08-29 22:01:31 INFO  [org.springframework.jms.JmsListenerEndpointContainer#0-1] com.twnch.eachbatch.service.activemq.Consumer: Queue返回訊息: [{"ID":16251,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SD","ACH_TXID":"506","ACH_SEQ":"00000003","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011111111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011300003","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"27352858  ","ACH_PID":"B125784951","ACH_CNO":"ACHU003             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"},{"ID":16246,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SC","ACH_TXID":"358","ACH_SEQ":"00000004","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011211111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011500001","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"03704502  ","ACH_PID":"A264885123","ACH_CNO":"ACHU004             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"}]
2023-08-29 22:01:31 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 資料更新, PROCAMT = 300, PROCCOUNT = 3
2023-08-29 22:01:31 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 交易完成, 狀態更新為9, 交易為: MyEntity2(ID=16251, BIZDATE=01120809, PROCSEQ=1, BATCHSEQ=822-01120807006, ACH_TXDATE=01120809, ACH_TYPE=N, ACH_TXTYPE=SD, ACH_TXID=506, ACH_SEQ=00000003, ACH_PBANK=0040037, ACH_PCLNO=0000000011111111, ACH_RBANK=4980000, ACH_RCLNO=0000000011300003, ACH_AMT=0000000100, ACH_SCHD=B, ACH_CID=27352858  , ACH_PID=B125784951, ACH_CNO=ACHU003             , ACH_CFEE=00000, TXN_AMT=100, STATUS=9)
2023-08-29 22:01:31 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 資料更新, PROCAMT = 200, PROCCOUNT = 2
2023-08-29 22:01:31 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 交易完成, 狀態更新為9, 交易為: MyEntity2(ID=16246, BIZDATE=01120809, PROCSEQ=1, BATCHSEQ=822-01120807006, ACH_TXDATE=01120809, ACH_TYPE=N, ACH_TXTYPE=SC, ACH_TXID=358, ACH_SEQ=00000004, ACH_PBANK=0040037, ACH_PCLNO=0000000011211111, ACH_RBANK=4980000, ACH_RCLNO=0000000011500001, ACH_AMT=0000000100, ACH_SCHD=B, ACH_CID=03704502  , ACH_PID=A264885123, ACH_CNO=ACHU004             , ACH_CFEE=00000, TXN_AMT=100, STATUS=9)
2023-08-29 22:01:32 INFO  [pool-1-thread-1] com.twnch.eachbatch.dao.MyActivemq: 資料傳送至Queue, 資料為: [{"ID":16247,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SC","ACH_TXID":"358","ACH_SEQ":"00000005","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011211111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011500002","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"03704502  ","ACH_PID":"C123654874","ACH_CNO":"ACHU005             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"},{"ID":16248,"BIZDATE":"01120809","PROCSEQ":1,"BATCHSEQ":"822-01120807006","ACH_TXDATE":"01120809","ACH_TYPE":"N","ACH_TXTYPE":"SC","ACH_TXID":"358","ACH_SEQ":"00000006","ACH_PBANK":"0040037","ACH_PCLNO":"0000000011211111","ACH_RBANK":"4980000","ACH_RCLNO":"0000000011500003","ACH_AMT":"0000000100","ACH_SCHD":"B","ACH_CID":"03704502  ","ACH_PID":"N132564854","ACH_CNO":"ACHU006             ","ACH_CFEE":"00000","TXN_AMT":"100","STATUS":"1"}]
2023-08-29 22:01:32 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 資料更新, PROCAMT = 100, PROCCOUNT = 1
2023-08-29 22:01:32 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 交易完成, 狀態更新為9, 交易為: MyEntity2(ID=16247, BIZDATE=01120809, PROCSEQ=1, BATCHSEQ=822-01120807006, ACH_TXDATE=01120809, ACH_TYPE=N, ACH_TXTYPE=SC, ACH_TXID=358, ACH_SEQ=00000005, ACH_PBANK=0040037, ACH_PCLNO=0000000011211111, ACH_RBANK=4980000, ACH_RCLNO=0000000011500002, ACH_AMT=0000000100, ACH_SCHD=B, ACH_CID=03704502  , ACH_PID=C123654874, ACH_CNO=ACHU005             , ACH_CFEE=00000, TXN_AMT=100, STATUS=9)
2023-08-29 22:01:32 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 資料更新, PROCAMT = 0, PROCCOUNT = 0
2023-08-29 22:01:32 INFO  [pool-1-thread-1] com.twnch.eachbatch.util.SelectData: 交易完成, 狀態更新為9, 交易為: MyEntity2(ID=16248, BIZDATE=01120809, PROCSEQ=1, BATCHSEQ=822-01120807006, ACH_TXDATE=01120809, ACH_TYPE=N, ACH_TXTYPE=SC, ACH_TXID=358, ACH_SEQ=00000006, ACH_PBANK=0040037, ACH_PCLNO=0000000011211111, ACH_RBANK=4980000, ACH_RCLNO=0000000011500003, ACH_AMT=0000000100, ACH_SCHD=B, ACH_CID=03704502  , ACH_PID=N132564854, ACH_CNO=ACHU006             , ACH_CFEE=00000, TXN_AMT=100, STATUS=9)
2023-08-29 22:01:32 INFO  [pool-1-thread-1] com.twnch.eachbatch.dao.TaskIsComplete: 資料完成, 狀態更新為5, 移動到result, 資料為: MyEntity(ID=16252, PROCSEQ=1, BIZDATE=01120809  , BATCHSEQ=822-01120807006, START_TS=2023-08-29 22:01:29.089, TOTALCOUNT=6, TOTALAMT=600, REJECTCOUNT=0, REJECTAMT=0, ACCEPTCOUNT=6, ACCEPTAMT=600, PROCCOUNT=0, PROCAMT=0, LASTMODIFYDT=2023-08-29 22:01:32.149, STATUS=5, PFILENAME=822-01120807006.P01, FILELAYOUT=01, SENDERBANK=0040037, CUT_IN_LINE=N                                                 )
